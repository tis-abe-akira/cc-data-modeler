# プロジェクト実績管理システム - 要件ドラフト

**ステータス**: 壁打ち完了 → ユースケース記述作成中
**作成日**: 2026-01-10
**最終更新**: 2026-01-10 16:35

---

## 目的

プロジェクトの**実績データを蓄積**し、過去の知見として参考にできるようにする。

**スコープ**:
- ✅ プロジェクトの実績データの記録・管理
- ❌ プロジェクトの計画管理（スコープ外）

---

## 主要エンティティ（案）

### 1. プロジェクト基本情報

- プロジェクト名
- 顧客
- 顧客の業界

### 2. 組織と人の管理

**組織**:
- 担当組織（部門、事業部）

**人**:
- プロジェクトオーナー
- PM（プロジェクトマネージャー）
- PL（プロジェクトリーダー）
- その他関与者

**重要な制約**:
- プロジェクトと組織は**多対多**（複数部門での共同プロジェクトあり）
- プロジェクトと人も**多対多**（兼務あり）

### 3. システム開発案件の属性

システム開発プロジェクトを想定した属性情報。

- **開発種別**: 新規開発 / 保守
- **開発方式**: スクラッチ / パッケージ利用
- **対象工程**: 要件定義、設計、実装、テスト、リリース等
- **受注規模**: 工数（人月/人日）
- **スケジュール**: 開始日、終了日、期間

### 4. 専門家による支援活動（拡張可能な設計）

プロジェクトに対して、専門家が各種支援を行う仕組み。

**支援タイプ（例）**:
- **生成AI活用支援**: プロジェクトでの生成AI導入・活用を支援
- **セキュリティチェック**: セキュリティ専門家による診断・アドバイス
- **（将来追加）**: パフォーマンスチューニング、アーキテクチャレビューなど

**設計方針**:
- 同じDB内の別テーブルで管理
- 1つのプロジェクトに対して、複数回の支援あり得る（工程ごとなど）
- 支援内容を記録: 支援計画、実施履歴、メモ、成果など
- 将来的に新しい支援タイプを追加できる**拡張性**を持つ設計

### 5. リスクランク

- **算出方法**: ルールベースでシステムが提案 + 人間による手動入力も可能
- **算出基準**: プロジェクト規模、工期、開発方式、技術難易度など
- **将来拡張**: AIによる過去実績からの推論（バックログ）

---

## イベント駆動設計（イミュータブルモデルの核心）

### データ登録パターン

**理想形（推奨）**: イベントが発生した時点で個別に記録

- 「プロジェクトが開始した」→ プロジェクト開始イベント記録
- 「担当者がアサインされた」→ 担当者アサインイベント記録
- 「組織が参画した」→ 組織参画イベント記録
- 「支援活動が実施された」→ 支援実施イベント記録
- 「リスクランクが見直された」→ リスク評価イベント記録
- 「プロジェクトが完了した」→ プロジェクト完了イベント記録

**現実的なパターン**: プロジェクト終結時にまとめて登録

極端な話、プロジェクト終結後に実績を振り返って一括入力するユースケースもあり得る。

**実装方針**:
- まずは**細かく入れる機能**を原則として提供
- まとめて入れる便利機能は将来的な拡張として検討（バックログ）

### 履歴管理の徹底

**方針**: すべての変化を**イベント**として履歴に残す（イミュータブルデータモデルのデモとして）

**履歴を残す対象**:
- 担当者の変更（山田PM → 鈴木PMへの交代）
- 組織の参画・離脱（A部門単独 → B部門も参画）
- 支援活動の各回の実施記録（複数回の支援）
- リスクランクの見直し履歴
- スケジュール変更の履歴

**メリット**:
- 「なぜこうなったのか」の経緯が追跡可能
- 過去のある時点の状態を正確に再現できる
- トラブル時の原因分析に有用

---

## 認可（アクセス制御）要件

ユーザーの役割や所属に応じて、閲覧可能なデータ範囲が異なる。

### アクセス権限の分類

| 役割 | 閲覧範囲 | 更新権限 | 備考 |
|------|---------|---------|------|
| **事業部長** | 所属事業部内の全プロジェクト | ？ | 管理者的視点 |
| **部長** | 所属部門内の全プロジェクト | ？ | 管理者的視点 |
| **プロジェクト担当者** | 関与したプロジェクトのみ | ？ | PJ直接関与 |
| **AI活用支援担当者** | 支援対象のプロジェクトのみ | ？ | PJ直接関与 |
| **システム管理者** | 全データ | 全データ | 特権アカウント |

### 視点の分類

- **PJ直接関与の立場**: プロジェクトに直接参加・支援する人（担当者、AI支援担当者）
- **管理者的視点**: 組織管理の立場からデータを俯瞰する人（事業部長、部長）

---

## 設計方針（壁打ちで確定した項目）

### ✅ イベント登録パターン
- **理想形**: イベント単位で細かく記録
- **現実対応**: まとめて入れる機能は将来拡張（バックログ）

### ✅ 履歴管理
- すべての変化をイベントとして**執拗に残す**（イミュータブルモデルのデモとして）

### ✅ 支援活動の設計
- 同じDB、別テーブルで管理
- 1プロジェクトに複数回の支援あり得る
- 支援タイプは拡張可能な設計（AI支援、セキュリティチェック等）

### ✅ リスクランク
- ルールベースでシステムが提案 + 人間の手動入力も可能
- AI推論は将来拡張（バックログ）

---

## 残りの検討事項

### 1. 組織階層の詳細

- 事業部 > 部門 > チーム のような階層構造の詳細
- 組織変更（異動、組織再編）をどう記録するか

### 2. 人の所属管理

- 兼務の場合、主所属と副所属の区別は必要か？
- 所属変更の履歴粒度（いつ記録するか）

### 3. スケジュールの実績管理

- 計画スケジュール vs 実績スケジュールの両方を記録？
- 遅延・変更の履歴をどこまで細かく記録するか？

### 4. 認可の詳細仕様

- 更新権限の設計はどうする？（閲覧のみ vs 更新可能）
- データの削除権限は誰に？
- プロジェクト作成時の初期権限はどう決まる？

### 5. プロジェクトのライフサイクル

- プロジェクトの状態（計画中、進行中、完了、中止など）は管理する？
- 完了後のデータは読み取り専用にする？

---

## 次のステップ

1. ✅ 壁打ちで要件を詳細化 → **完了**
2. ⏳ data-modeler用のユースケース記述を作成 → **作業中**
3. ⏳ data-modelerスキルでモデリング実行（プロジェクト名: `project-record-system`）
4. ⏳ Phase 2.5で属性レビュー機能をテスト
5. ⏳ 生成されたER図・DDLをレビュー

---

## メモ

- システム開発プロジェクト特化の実績管理
- 多対多関連が多い（組織-PJ、人-PJ）
- 認可ロジックが複雑（役割ベース + データスコープ）
- 時系列データ（組織変更、人の異動）の扱いが重要
